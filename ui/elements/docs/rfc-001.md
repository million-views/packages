# RFC: Profile & Design Interplay for @m5nv/ui-elements

## Table of Contents

1. [Overview](#overview)
2. [Terminology & Motivation](#terminology--motivation)
3. [Goals & Principles](#goals--principles)
4. [API Specification](#api-specification)

   1. [TypeScript Interfaces](#typescript-interfaces)
   2. [Provider & Context](#provider--context)
5. [CSS Architecture](#css-architecture)

   1. [Layer Structure](#layer-structure)
   2. [Base Tokens & Profile Overrides](#base-tokens--profile-overrides)
   3. [Component Styles & Design Modifiers](#component-styles--design-modifiers)
   4. [Slider Profiles (Barebones → Wireframe → Prototype → Web Minimal → … → App Native)](#slider-profiles-barebones--wireframe--prototype--web-minimal---app-native)
6. [Component Implementation Strategy](#component-implementation-strategy)

   1. [Reading Default Design Tokens](#reading-default-design-tokens)
   2. [Example: Pagination Component](#example-pagination-component)
7. [Bringing It All Together](#bringing-it-all-together)
8. [Success Criteria](#success-criteria)
9. [Appendix: Example Usage Patterns](#appendix-example-usage-patterns)

---

## 1. Overview

This RFC defines how two styling abstractions—**`profile`** (a global,
opinionated theme) and **`design`** (per-component, fine-grained
variants)—interact in the `@m5nv/ui-elements` library. Consumers pick a single
`profile` at the root (e.g. `"barebones"`, `"wireframe"`, `"web-minimal"`,
`"app-modern"`, etc.), which drives the entire look‐and‐feel via scoped CSS
variables and, where necessary, component-specific overrides. Within that theme,
individual components expose an optional `design` prop (fields like
`orientation`, `density`, `size`, `variant`) to override defaults for that one
instance.

By the end of this document, an AI coding assistant should be able to:

- Understand the roles and scopes of **`profile`** vs. **`design`**.
- Generate TypeScript interfaces and CSS patterns to implement both.
- Wire up context/providers so that **`profile`** drives global tokens and
  **`design`** drives component-level overrides.
- Support a “slider” of profiles from no styling (bare HTML) → rough/wireframe →
  prototype → minimal → classic → modern → native‐like.

---

## 2. Terminology & Motivation

1. **`profile`**

   - A single, opinionated theme that scopes the entire application’s design
     system.
   - Examples (slider from left-most → right-most):

     1. **`barebones`**: No styling; raw HTML.
     2. **`wireframe`**: Rough, sketchy look (dashed borders, monospace fonts).
     3. **`prototype`**: Placeholder‐focused, minimal detail (grey boxes, no
        shadows).
     4. **`web-minimal`**: Simple readable typography, neutral palette, minimal
        accents.
     5. **`web-antique`**: Vintage palette, subtle shadows, serif fonts.
     6. **`web-modern`** (default): Balanced web app look (brand colors,
        moderate spacing, simple shadows).
     7. **`app-modern`**: Polished, native‐app style (larger radii, pronounced
        shadows).
     8. **`app-native`**: Near-native OS styling (system‐font stacks, deep
        elevation).
   - Set once at the app root (via a data attribute on `<html>` or `<body>`).
     Cascades into all components’ CSS.
   - Drives **global CSS variables** (colors, typography, spacing, component
     defaults). Where needed, also drives specific component overrides.

2. **`design`**

   - Per-component, fine-grained layout/style overrides.
   - Shared fields across components (where applicable):

     - `orientation`: `"horizontal" | "vertical"`
     - `density`: `"comfortable" | "compact"`
     - `size`: `"sm" | "md" | "lg"`
     - `variant`: component‐specific semantic variant (e.g.
       `"filled" | "outline" | "ghost"`, etc.)
   - Passed as a prop, e.g.:

     ```tsx
     <Pagination design={{ orientation: "vertical", density: "compact", size: "sm" }} … />
     ```
   - Overrides the **profile**’s default tokens for that component instance.
     E.g. if `profile="web-modern"` sets `--pagination-density: comfortable`,
     but you pass `design.density="compact"`, the component uses “compact”
     instead.

3. **Separation & Rationale**

   - **`profile`** provides a coarse-grained, app-wide theme (palette,
     typography, spacing scale, plus component defaults).
   - **`design`** provides child-component overrides when a single widget needs
     to deviate without affecting the rest of the app.
   - This dual approach is common in modern UI libraries (e.g. Chakra,
     Material-UI) and suits a highly opinionated system that still allows
     one-off tweaks.

---

## 3. Goals & Principles

1. **Opinionated Theming**

   - Consumers pick one `profile` at the root; the entire design system adjusts
     automatically.
   - No need to remember dozens of class names—setting
     `data-mv-profile="wireframe"` flips to a sketchy, rough-style UI in one go.

2. **Local Overrides via `design`**

   - If a component must differ from the app’s baseline (e.g. a vertical,
     compact pagination in a horizontal, comfortable-themed app), the consumer
     passes a small `design` prop.
   - `design` remains minimal: only the most common layout/scale variants per
     component.

3. **CSS‐First Implementation**

   - All tokens (colors, fonts, spacing) live in `@layer base` as custom
     properties, scoped by `[data-mv-profile="…"]`.
   - Components in `@layer components` reference those variables and define
     class-based “design” modifiers (e.g. `.mv-pagination--compact`).
   - No JS-injected styles at runtime—just context attributes, CSS variables,
     and class names.

4. **Type Safety & Discoverability**

   - Expose strong TS interfaces for `Profile`, `Orientation`, `Density`,
     `Size`, `Design`.
   - Mistyping a profile or design value becomes a compile-time error.

5. **Backward Compatibility & Incremental Adoption**

   - Existing usage of `design` props remains functional.
   - `profile` adds a new top-level theming dimension but does not break
     existing per-component `design` usage.

---

## 4. API Specification

### 4.1. TypeScript Interfaces

```ts
// Profile values (slider from leftmost → rightmost)
export type Profile =
  | "barebones" // Raw HTML, no styling
  | "wireframe" // Rough/sketch mode (dashed borders, monospace)
  | "prototype" // Wireframe with placeholders (grey boxes)
  | "web-minimal" // Minimal styling: neutral palette, simple typography
  | "web-antique" // Vintage palette, serif fonts, subtle shadows
  | "web-modern" // Balanced web look (default)
  | "app-modern" // Polished native-app style
  | "app-native"; // Near-native OS styling

// Shared dimensions
export type Orientation = "horizontal" | "vertical";
export type Density = "comfortable" | "compact";
export type Size = "sm" | "md" | "lg";

// Context for global provider
export interface ElementsUIContext {
  profile: Profile;
  themeMode: "light" | "dark";
  palette: "ghibli" | "blue" | "purple" | "green" | "orange";
  accessibility?: {
    highContrast?: boolean;
    reducedMotion?: boolean;
  };
}

// Common props for all UI components
export interface BaseProps {
  responsive?: boolean; // default: true
}

// Pagination-specific design props
export interface PaginationDesign {
  orientation?: Orientation; // "horizontal" | "vertical"
  density?: Density; // "comfortable" | "compact"
  size?: Size; // "sm" | "md" | "lg"
}

// Props for Pagination component
export interface PaginationProps extends BaseProps {
  totalItems: number;
  itemsPerPage: number;
  currentPage: number;

  design?: PaginationDesign; // Per-instance overrides

  showPageInfo?: boolean;
  showPageSizeSelector?: boolean;
  pageSizeOptions?: number[];

  onPageChange: (page: number) => void;
  onPageSizeChange?: (pageSize: number) => void;
}
```

- Every component that supports layout/scale/density should adopt a similar
  `design` interface.
- Consumers get IDE auto-complete and type checks.

---

## 5. CSS Architecture

### 5.1. Layer Structure

```css
@layer base, components, utilities;
```

- **`@layer base`**: Defines design system tokens (custom properties) and
  profile overrides.
- **`@layer components`**: Contains all component styles, referencing variables
  and using nested selectors for “design” class modifiers.
- **`@layer utilities`**: Contains helpers, container-query utilities,
  accessibility overrides (e.g. high-contrast, reduced motion).

### 5.2. Base Tokens & Profile Overrides

All tokens live in `@layer base`. The default (no-profile or `"web-modern"`)
tokens come first; then each profile override redefines those tokens.

```css
@layer base {
  /* Default tokens (web-modern) */
  :root {
    --mv-color-primary: #7c9885;
    --mv-color-surface: #faf9f6;
    --mv-font-family: "Inter", sans-serif;
    --mv-font-size-base: 1rem;
    --mv-space-xs: 0.25rem;
    --mv-space-sm: 0.5rem;
    --mv-space-md: 0.75rem;
    --mv-space-lg: 1rem;
    --mv-space-xl: 1.5rem;
    --mv-radius-sm: 0.375rem;
    --mv-radius-md: 0.5rem;
    --mv-radius-lg: 0.75rem;
    --mv-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06);
    --mv-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
    --mv-color-border: #e6e1d8;
    --mv-color-border-dark: #d4cfc4;
    --mv-color-text-primary: #3a3530;
    --mv-color-text-secondary: #6b6358;
    /* Component defaults (e.g. Pagination) */
    --pagination-density: comfortable;
    --pagination-size: md;
    --pagination-orientation: horizontal;
    /* ...other component defaults... */
  }

  /* Profile: Barebones (unstyled) */
  :root[data-mv-profile="barebones"] {
    /* Reset tokens to neutral/inherit */
    --mv-color-primary: inherit;
    --mv-color-surface: transparent;
    --mv-font-family: inherit;
    --mv-space-md: 0;
    --pagination-density: comfortable;
    --pagination-size: md;
    --pagination-orientation: horizontal;
    /* ...reset all other tokens as needed... */
  }

  /* Profile: Wireframe (rough Sketch) */
  :root[data-mv-profile="wireframe"] {
    --mv-color-primary: #000;
    --mv-color-surface: transparent;
    --mv-font-family: "Courier New", monospace;
    --mv-space-md: 0.5rem;
    --pagination-density: compact;
    --pagination-size: sm;
    --pagination-orientation: vertical;
    /* ...other wireframe tokens... */
  }

  /* Profile: Prototype (placeholder-focused) */
  :root[data-mv-profile="prototype"] {
    --mv-color-primary: #888888;
    --mv-color-surface: #eeeeee;
    --mv-font-family: "Inter", sans-serif;
    --mv-space-md: 1rem;
    --pagination-density: comfortable;
    --pagination-size: md;
    --pagination-orientation: horizontal;
    /* ...other prototype tokens... */
  }

  /* Profile: Web Minimal */
  :root[data-mv-profile="web-minimal"] {
    --mv-color-primary: #000000;
    --mv-color-surface: #ffffff;
    --mv-font-family: "Inter", sans-serif;
    --mv-space-md: 0.5rem;
    --pagination-density: comfortable;
    --pagination-size: sm;
    --pagination-orientation: horizontal;
    /* ...other minimal tokens... */
  }

  /* Profile: Web Antique */
  :root[data-mv-profile="web-antique"] {
    --mv-color-primary: #6b4f3b;
    --mv-color-surface: #f5f0ec;
    --mv-font-family: "Times New Roman", serif;
    --mv-space-md: 1rem;
    --pagination-density: compact;
    --pagination-size: lg;
    --pagination-orientation: vertical;
    /* ...other antique tokens... */
  }

  /* Profile: Web Modern (default) */
  :root[data-mv-profile="web-modern"] {
    --mv-color-primary: #7c9885;
    --mv-color-surface: #faf9f6;
    --mv-font-family: "Inter", sans-serif;
    --mv-space-md: 0.75rem;
    --pagination-density: comfortable;
    --pagination-size: md;
    --pagination-orientation: horizontal;
    /* ...other web-modern tokens... */
  }

  /* Profile: App Modern */
  :root[data-mv-profile="app-modern"] {
    --mv-color-primary: #1f2937;
    --mv-color-surface: #ffffff;
    --mv-font-family: "Inter", sans-serif;
    --mv-space-md: 0.75rem;
    --pagination-density: comfortable;
    --pagination-size: md;
    --pagination-orientation: horizontal;
    /* ...other app-modern tokens... */
  }

  /* Profile: App Native */
  :root[data-mv-profile="app-native"] {
    --mv-color-primary: #111111;
    --mv-color-surface: #fafafa;
    --mv-font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
    --mv-space-md: 1rem;
    --pagination-density: compact;
    --pagination-size: lg;
    --pagination-orientation: vertical;
    /* ...other app-native tokens... */
  }
}
```

- **Rationale:** Each profile is implemented as a `:root[data-mv-profile="…"]`
  block that overrides only the tokens needed for that look. All components read
  these variables to style themselves.

### 5.3. Component Styles & Design Modifiers

Each component’s CSS lives in `@layer components { … }`. It references tokens
defined above and adds class‐based “design” modifiers (e.g.
`.mv-pagination--compact`). Below is the **Pagination** example. Other
components follow the same pattern.

```css
@layer components {
  /* === Pagination Component === */
  .mv-pagination {
    display: flex;
    margin-top: var(--mv-space-xl);

    /* density variants */
    &.mv-pagination--compact {
      gap: var(--mv-space-sm);
    }
    &.mv-pagination--comfortable {
      gap: var(--mv-space-md);
    }

    /* size variants */
    &.mv-pagination--sm {
      font-size: var(--mv-font-size-sm);
    }
    &.mv-pagination--md {
      font-size: var(--mv-font-size-md);
    }
    &.mv-pagination--lg {
      font-size: var(--mv-font-size-lg);
    }

    /* orientation variants */
    &.mv-pagination--horizontal {
      flex-direction: row;
    }
    &.mv-pagination--vertical {
      flex-direction: column;
    }

    /* child elements */
    & .mv-pagination__info {
      color: var(--mv-color-text-secondary);
      font-size: var(--mv-font-size-sm);
      font-weight: var(--mv-font-weight-medium);
    }

    & .mv-pagination__controls {
      display: flex;
      align-items: center;
      gap: var(--mv-space-sm);
    }

    & .mv-pagination__button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 2.75rem;
      height: 2.75rem;
      padding: var(--mv-space-sm);
      border: 2px solid var(--mv-color-border);
      border-radius: var(--mv-radius-md);
      background: var(--mv-color-surface);
      color: var(--mv-color-text-primary);
      font-family: inherit;
      font-size: var(--mv-font-size-sm);
      font-weight: var(--mv-font-weight-semibold);
      cursor: pointer;
      transition: var(--mv-transition-fast);
      outline: none;
    }

    & .mv-pagination__button:hover:not(:disabled) {
      background: var(--mv-color-surface-hover);
      border-color: var(--mv-color-border-dark);
      transform: translateY(-1px);
      box-shadow: var(--mv-shadow-sm);
    }

    & .mv-pagination__button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    & .mv-pagination__button--active {
      background: var(--mv-color-primary);
      color: var(--mv-color-text-inverse);
      border-color: var(--mv-color-primary);
      box-shadow: var(--mv-shadow-md);
    }

    & .mv-pagination__button--prev,
    & .mv-pagination__button--next {
      font-size: var(--mv-font-size-lg);
    }

    & .mv-pagination__ellipsis {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 2.75rem;
      height: 2.75rem;
      color: var(--mv-color-text-muted);
      font-size: var(--mv-font-size-md);
      font-weight: var(--mv-font-weight-semibold);
    }

    & .mv-pagination__page-size {
      display: flex;
      align-items: center;
      gap: var(--mv-space-md);
    }

    & .mv-pagination__page-size-label {
      color: var(--mv-color-text-secondary);
      font-size: var(--mv-font-size-sm);
      font-weight: var(--mv-font-weight-medium);
    }

    & .mv-pagination__page-size-select {
      padding: var(--mv-space-sm) var(--mv-space-md);
      border: 2px solid var(--mv-color-border);
      border-radius: var(--mv-radius-md);
      background: var(--mv-color-surface);
      color: var(--mv-color-text-primary);
      font-family: inherit;
      font-size: var(--mv-font-size-sm);
      cursor: pointer;
      outline: none;
      min-height: 2.5rem;
    }

    & .mv-pagination__page-size-select:focus {
      border-color: var(--mv-color-primary);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--mv-color-primary) 15%, transparent);
    }
  }

  /* === Pagination Container === */
  .mv-pagination-container {
    display: flex;
    container-type: inline-size;
    container-name: pagination;
    align-items: center;
    justify-content: center;
    gap: var(--mv-space-xl);
    flex-wrap: wrap;
    padding: var(--mv-space-lg);
    background: var(--mv-color-surface-elevated);
    border-radius: var(--mv-radius-lg);
    border: 1px solid var(--mv-color-border-light);
    box-sizing: border-box;
    width: 100%;
    min-width: 0;

    &.mv-pagination-container--horizontal {
      flex-direction: row;
    }
    &.mv-pagination-container--vertical {
      flex-direction: column;
      align-items: stretch;
      gap: var(--mv-space-lg);

      & .mv-pagination__controls {
        justify-content: center;
      }
      & .mv-pagination__info,
      & .mv-pagination__page-size {
        text-align: center;
      }
    }
  }

  /* Responsive adjustments via container queries */
  @container pagination (max-width: 640px) {
    .mv-pagination-container {
      gap: var(--mv-space-md);
      padding: var(--mv-space-md);

      &.mv-pagination-container--horizontal {
        flex-direction: column;
        align-items: stretch;
        gap: var(--mv-space-lg);

        & .mv-pagination__controls {
          justify-content: center;
        }
        & .mv-pagination__info {
          text-align: center;
        }
      }

      & .mv-pagination__page-size {
        display: none;
      }
    }
  }

  @container pagination (max-width: 480px) {
    .mv-pagination__info {
      display: none;
    }
    .mv-pagination__page-size {
      display: none;
    }
  }

  @container pagination (max-width: 320px) {
    .mv-pagination__button--page:not(.mv-pagination__button--active) {
      display: none;
    }
    .mv-pagination__ellipsis {
      display: none;
    }
    .mv-pagination__controls {
      flex-direction: row;
      gap: var(--mv-space-md);
      justify-content: center;
      position: relative;
    }
  }

  /* === Wireframe Overrides (Sketchy Look) === */
  :root[data-mv-profile="wireframe"] .mv-pagination {
    background: none;
    border: none;
  }
  :root[data-mv-profile="wireframe"] .mv-pagination__button {
    background: transparent;
    border: 2px dashed var(--mv-color-primary);
    color: var(--mv-color-primary);
    font-family: var(--mv-font-family);
  }
  :root[data-mv-profile="wireframe"] .mv-pagination__button:hover {
    background: none;
    transform: none;
    box-shadow: none;
  }

  /* === Prototype Overrides (Placeholder Style) === */
  :root[data-mv-profile="prototype"] .mv-card,
  :root[data-mv-profile="prototype"] .mv-button {
    background: #eee;
    border: 1px dashed #ccc;
    box-shadow: none;
  }

  /* === Barebones Overrides (Unstyled) === */
  :root[data-mv-profile="barebones"] .mv-card,
  :root[data-mv-profile="barebones"] .mv-button,
  :root[data-mv-profile="barebones"] .mv-pagination,
  /* …all other component selectors… */ {
    all: unset !important;
    display: block;
    font: inherit;
  }

  /* (Other components follow the same pattern: base style → design modifiers → profile-specific overrides) */
}
```

- Profiles like `"wireframe"`, `"prototype"`, and `"barebones"` simply add extra
  CSS overrides under `@layer components`.
- Most components rely on variables defined in `@layer base`; only “structural”
  or visual overrides appear here.

### 5.4. Utilities & Accessibility Overrides

```css
@layer utilities {
  /* Container query utilities, high‐contrast, reduced motion, print styles… */

  /* Example: high‐contrast mode */
  @media (prefers-contrast: high) {
    :root {
      --mv-color-border: var(--mv-color-text-primary);
      --mv-color-text-secondary: var(--mv-color-text-primary);
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}
```

---

## 6. Component Implementation Strategy

### 6.1. Provider & Context

```tsx
// ElementsUIProvider.tsx
import React, { createContext, ReactNode, useContext, useEffect } from "react";
import type { Profile } from "./types";

export const ElementsUIContext = createContext<{
  profile: Profile;
  themeMode: "light" | "dark";
  palette: "ghibli" | "blue" | "purple" | "green" | "orange";
  accessibility: { highContrast: boolean; reducedMotion: boolean };
}>({
  profile: "web-modern",
  themeMode: "light",
  palette: "ghibli",
  accessibility: { highContrast: false, reducedMotion: false },
});

export function ElementsUIProvider({
  children,
  profile = "web-modern",
  themeMode = "light",
  palette = "ghibli",
  accessibility = { highContrast: false, reducedMotion: false },
}: {
  children: ReactNode;
  profile?: Profile;
  themeMode?: "light" | "dark";
  palette?: "ghibli" | "blue" | "purple" | "green" | "orange";
  accessibility?: { highContrast?: boolean; reducedMotion?: boolean };
}) {
  useEffect(() => {
    const root = document.documentElement;
    root.setAttribute("data-mv-profile", profile);
    root.setAttribute("data-theme", themeMode);
    root.setAttribute("data-palette", palette);
    if (accessibility.highContrast) {
      root.setAttribute("data-high-contrast", "true");
    } else {
      root.removeAttribute("data-high-contrast");
    }
    if (accessibility.reducedMotion) {
      root.setAttribute("data-reduced-motion", "true");
    } else {
      root.removeAttribute("data-reduced-motion");
    }
  }, [profile, themeMode, palette, accessibility]);

  return (
    <ElementsUIContext.Provider
      value={{ profile, themeMode, palette, accessibility }}
    >
      {children}
    </ElementsUIContext.Provider>
  );
}

export function useElementsUI() {
  return useContext(ElementsUIContext);
}
```

- This provider sets the `data-mv-profile` attribute on `<html>`.
- All CSS defined under `:root[data-mv-profile="…"]` is picked up automatically.
- Consumers wrap their app in `<ElementsUIProvider profile="wireframe">`.

### 6.2. Reading Default Design Tokens

```ts
// hooks/useCSSVariable.ts
export function useCSSVariable(varName: string): string {
  // Trim because computed style often includes trailing whitespace
  return getComputedStyle(document.documentElement)
    .getPropertyValue(varName)
    .trim();
}
```

- Each component calls this to fetch default `density`, `size`, `orientation`
  tokens from CSS if `design` prop is undefined.

### 6.3. Example: Pagination Component

```tsx
// Pagination.tsx
import React from "react";
import { useCSSVariable } from "./hooks/useCSSVariable";

export function Pagination(props: PaginationProps) {
  const {
    totalItems,
    itemsPerPage,
    currentPage,
    design = {},
    showPageInfo = true,
    showPageSizeSelector = false,
    pageSizeOptions = [10, 20, 50, 100],
    onPageChange,
    onPageSizeChange,
  } = props;

  // 1) Grab default design tokens from CSS (set by profile)
  const defaultDensity = useCSSVariable("--pagination-density") as Density;
  const defaultSize = useCSSVariable("--pagination-size") as Size;
  const defaultOrientation = useCSSVariable(
    "--pagination-orientation",
  ) as Orientation;

  // 2) Merge with design prop
  const {
    density = defaultDensity,
    size = defaultSize,
    orientation = defaultOrientation,
  } = design;

  // 3) Build class lists
  const paginationClasses = [
    "mv-pagination",
    `mv-pagination--${density}`,
    `mv-pagination--${size}`,
    `mv-pagination--${orientation}`,
  ].join(" ");

  const containerClasses = [
    "mv-pagination-container",
    `mv-pagination-container--${orientation}`,
  ].join(" ");

  // 4) Compute pagination logic
  const totalPages = Math.ceil(totalItems / itemsPerPage);
  if (totalPages <= 1) return null;
  const startItem = (currentPage - 1) * itemsPerPage + 1;
  const endItem = Math.min(currentPage * itemsPerPage, totalItems);

  function handlePageChange(page: number) {
    if (page >= 1 && page <= totalPages && page !== currentPage) {
      onPageChange(page);
    }
  }
  function handlePageSizeChange(newSize: number) {
    onPageSizeChange?.(newSize);
    onPageChange(1);
  }

  function getPageNumbers(): (number | string)[] {
    const pages: (number | string)[] = [];
    if (totalPages <= 7) {
      for (let i = 1; i <= totalPages; i++) pages.push(i);
    } else {
      pages.push(1);
      if (currentPage > 4) pages.push("...");
      const start = Math.max(2, currentPage - 1);
      const end = Math.min(totalPages - 1, currentPage + 1);
      for (let i = start; i <= end; i++) {
        if (!pages.includes(i)) pages.push(i);
      }
      if (currentPage < totalPages - 3) pages.push("...");
      if (!pages.includes(totalPages)) pages.push(totalPages);
    }
    return pages;
  }

  return (
    <div className={paginationClasses}>
      <div className={containerClasses}>
        {showPageInfo && (
          <div className="mv-pagination__info">
            Showing {startItem}-{endItem} of {totalItems} items
          </div>
        )}
        <div className="mv-pagination__controls">
          <button
            className="mv-pagination__button mv-pagination__button--prev"
            onClick={() => handlePageChange(currentPage - 1)}
            disabled={currentPage === 1}
            aria-label="Previous page"
          >
            ←
          </button>
          {getPageNumbers().map((page, idx) =>
            page === "..."
              ? (
                <span key={idx} className="mv-pagination__ellipsis">
                  …
                </span>
              )
              : (
                <button
                  key={idx}
                  className={`mv-pagination__button mv-pagination__button--page ${
                    page === currentPage ? "mv-pagination__button--active" : ""
                  }`}
                  onClick={() => handlePageChange(page as number)}
                  aria-label={`Page ${page}`}
                  aria-current={page === currentPage ? "page" : undefined}
                >
                  {page}
                </button>
              )
          )}
          <button
            className="mv-pagination__button mv-pagination__button--next"
            onClick={() => handlePageChange(currentPage + 1)}
            disabled={currentPage === totalPages}
            aria-label="Next page"
          >
            →
          </button>
        </div>
        {showPageSizeSelector && onPageSizeChange && (
          <div className="mv-pagination__page-size">
            <label className="mv-pagination__page-size-label">
              Items per page:
            </label>
            <select
              className="mv-pagination__page-size-select"
              value={itemsPerPage}
              onChange={(e) => handlePageSizeChange(Number(e.target.value))}
            >
              {pageSizeOptions.map((sz) => (
                <option key={sz} value={sz}>
                  {sz}
                </option>
              ))}
            </select>
          </div>
        )}
      </div>
    </div>
  );
}
```

- This code automatically picks up “wireframe” or “barebones” styling from CSS
  when the profile is set.
- Passing a `design` prop overrides those defaults for density/orientation/size.

---

## 7. Bringing It All Together

1. **Wrap App with `ElementsUIProvider`**

   ```tsx
   import React from "react";
   import {
     Button,
     Card,
     ElementsUIProvider,
     Pagination,
   } from "@m5nv/ui-elements";

   function App() {
     return (
       <ElementsUIProvider profile="wireframe">
         <h1>Wireframe Dashboard</h1>
         <Pagination
           totalItems={120}
           itemsPerPage={10}
           currentPage={2}
           onPageChange={(p) => console.log("Page:", p)}
           design={{ density: "compact", size: "sm" }}
         />
         <Button>Click Me</Button>
         <Card>Sample Card</Card>
       </ElementsUIProvider>
     );
   }
   ```

2. **Toggle Profiles at Runtime**

   ```tsx
   function ThemeSwitcher() {
     const [profile, setProfile] = React.useState<Profile>("web-modern");
     return (
       <ElementsUIProvider profile={profile}>
         <select onChange={(e) => setProfile(e.target.value as Profile)}>
           <option value="barebones">Barebones</option>
           <option value="wireframe">Wireframe</option>
           <option value="prototype">Prototype</option>
           <option value="web-minimal">Web Minimal</option>
           <option value="web-antique">Web Antique</option>
           <option value="web-modern">Web Modern</option>
           <option value="app-modern">App Modern</option>
           <option value="app-native">App Native</option>
         </select>
         <h2>Current Profile: {profile}</h2>
         <Pagination
           totalItems={80}
           itemsPerPage={20}
           currentPage={1}
           onPageChange={(p) => console.log("–>", p)}
         />
         <Button>Prototype Button</Button>
         <Card>Content Card</Card>
       </ElementsUIProvider>
     );
   }
   ```

- Switching the `<select>` instantly updates `data-mv-profile` on `<html>`,
  causing CSS variables and overrides to reflow.

---

## 8. Success Criteria

- **Correct Context Attribute Handling:**

  - `ElementsUIProvider` sets `data-mv-profile` on `<html>`.
  - All CSS in `@layer base` and relevant `@layer components` picks up that
    attribute.

- **Accurate CSS Scoping:**

  - `:root[data-mv-profile="…"]` blocks override base tokens.
  - Components reference those tokens via `var(--…)` and apply “design” classes
    (e.g. `.mv-pagination--compact`).

- **Design Prop Behavior:**

  - If `design` is omitted, each component reads default tokens from CSS
    variables (e.g. `--pagination-density`).
  - If `design` is provided, its values override default tokens for that
    instance.

- **Type-Safe Interfaces:**

  - TS types for `Profile`, `Orientation`, `Density`, `Size` ensure only valid
    values.
  - Mistyped props yield compile-time errors.

- **Consistent Component Patterns:**

  - No legacy `layout` or `styling` props remain.
  - All dynamic states (e.g. `loading`, `error`) are separate from `design`.

- **Minimal CSS Duplication:**

  - Profile overrides in `@layer base` cover most visual differences.
  - Component-level overrides only appear under `:root[data-mv-profile="…"]`
    when structural changes are necessary.

- **Backward Compatibility:**

  - Existing code using only `design` props continues to work unchanged.
  - Introduction of `profile` provides new capabilities without breaking
    existing usage.

---

## 9. Appendix: Example Usage Patterns

1. **Global Profile Only**

   ```tsx
   <ElementsUIProvider profile="web-minimal">
     <Pagination
       totalItems={120}
       itemsPerPage={10}
       currentPage={3}
       onPageChange={(p) => console.log("Page:", p)}
     />
     <Button>Continue</Button>
   </ElementsUIProvider>;
   ```

   - “Web Minimal” tokens apply: neutral palette, minimal accents, small
     pagination size by default.

2. **Component-Specific Override**

   ```tsx
   <ElementsUIProvider profile="web-modern">
     <Sidebar>
       <Pagination
         totalItems={80}
         itemsPerPage={20}
         currentPage={1}
         design={{ orientation: "vertical", density: "compact", size: "sm" }}
         onPageChange={(p) => console.log("Sidebar Page:", p)}
       />
     </Sidebar>
     <MainContent>
       <Pagination
         totalItems={200}
         itemsPerPage={10}
         currentPage={5}
         onPageChange={(p) => console.log("Main Page:", p)}
       />
     </MainContent>
   </ElementsUIProvider>;
   ```

   - Sidebar pagination is vertical & compact despite `"web-modern"` defaults
     (horizontal/comfortable). Main pagination uses defaults.

3. **Barebones & Wireframe Profiles**

   ```tsx
   <ElementsUIProvider profile="barebones">
     <Button>Unstyled Button</Button>
     <Card>Unstyled Card</Card>
     <Pagination totalItems={50} itemsPerPage={10} currentPage={2} onPageChange={(p) => {}} />
   </ElementsUIProvider>

   <ElementsUIProvider profile="wireframe">
     <Button>Sketchy Button</Button>
     <Card>Sketchy Card</Card>
     <Pagination totalItems={50} itemsPerPage={10} currentPage={2} onPageChange={(p) => {}} />
   </ElementsUIProvider>
   ```

   - “Barebones” shows completely unstyled HTML.
   - “Wireframe” applies dashed borders, monospace fonts, transparent
     backgrounds, approximating a rough.js sketch.

4. **Runtime Profile Switch Example**

   ```tsx
   function ThemeSwitcherExample() {
     const [profile, setProfile] = React.useState<Profile>("web-modern");
     return (
       <ElementsUIProvider profile={profile}>
         <select onChange={(e) => setProfile(e.target.value as Profile)}>
           <option value="barebones">Barebones</option>
           <option value="wireframe">Wireframe</option>
           <option value="prototype">Prototype</option>
           <option value="web-minimal">Web Minimal</option>
           <option value="web-antique">Web Antique</option>
           <option value="web-modern">Web Modern</option>
           <option value="app-modern">App Modern</option>
           <option value="app-native">App Native</option>
         </select>
         <h2>Profile: {profile}</h2>
         <Pagination
           totalItems={120}
           itemsPerPage={10}
           currentPage={4}
           onPageChange={(p) => console.log("Page:", p)}
         />
         <Button>Click Me</Button>
       </ElementsUIProvider>
     );
   }
   ```

- Dropdown toggles between slider profiles; entire UI updates accordingly
  without page reload.

---

**End of RFC**
